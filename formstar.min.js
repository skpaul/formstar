!function(t){t.fn.formstar=function(e){var r,a=t(this),s=t.extend({format:"auto",ajax:!0,validationRules:"",beforeSend:"",additionalBeforeSend:"",success:"",error:"",complete:"",reset:!0},e),n=a.attr("action"),i=a.attr("method"),o=t(this).find("button[type=submit]"),l="",d=o.find("span.buttonText"),u=o.find("span.buttonIcon");function c(e,r){t.sweetModal({content:e,icon:t.sweetModal.ICON_WARNING}),r.addClass("error"),t("html,body").animate({scrollTop:r.offset().top-50},1e3),r.focus()}function f(){s.beforeSend?s.beforeSend():(0!==d.length?(l=d.html(),d.html("Wait…"),u.html(),u.addClass("spinner").html("autorenew").css("color","#A3B9D8")):(l=o.html(),o.html("Wait…")),o.attr("disabled","disabled"),s.additionalBeforeSend&&s.additionalBeforeSend())}function g(e){if(s.success)o.removeAttr("disabled"),0!==d.length?(d.html(l),u.removeClass("spinner").html("done").css("color","#A3B9D8")):o.html(l),s.success(e);else{if(void 0===e.issuccess)return o.removeAttr("disabled"),console.log(e),0!==d.length?(d.html(l),u.removeClass("spinner").html("arrow_forward").css("color","#A3B9D8")):o.html(l),console.log(l),alert("Problem in getting response from server. Please try again."),!1;e.issuccess?(void 0!==e.message&&(t.sweetModal({content:e.message,icon:t.sweetModal.ICON_SUCCESS}),o.removeAttr("disabled"),0!==d.length?(d.html(l),u.removeClass("spinner").html("arrow_forward").css("color","#A3B9D8")):o.html(l),s.reset&&((r=a).trigger("reset"),t("select.resetIt",r).each((function(){var e=t(this).attr("data-default-value"),r=t(this).attr("data-default-text");t(this).empty().append('<option value="'+e+'">'+r+"</option>")})),t("select.emptyIt",r).empty(),t(r).find("input:visible:first").focus())),void 0!==e.redirecturl&&(window.location=e.redirecturl)):(t.sweetModal({content:e.message,icon:t.sweetModal.ICON_WARNING}),o.removeAttr("disabled"),0!==d.length?(d.html("Try again"),u.removeClass("spinner").html("arrow_forward").css("color","#A3B9D8")):o.html("Try again"))}var r}function m(e,r,a){0!==d?(d.html("Try again"),u.removeClass("spinner").html("arrow_forward").css("color","#A3B9D8")):o.html("Try again"),s.error?s.error(e,r,a):function(e,r,a){var s="Failed to execute.\n";switch(r){case"timeout":s+="Operation timeout. Pleasy try again.",s+="\n "+e.statusText+" ("+e.status+")";break;case"error":s+="An error ouccured.",s+="\n "+e.statusText+" ("+e.status+")";break;case"abort":s+="Request aborted.",s+="\n "+e.statusText+" ("+e.status+")";break;case"parsererror":s+="Parser error.",s+="\n "+e.statusText+" ("+e.status+")";break;default:s+="An unexpected error occured.",s+="\n "+e.statusText+" ("+e.status+")"}t.sweetModal({content:s,icon:t.sweetModal.ICON_WARNING}),console.log(e.status),console.log(e.statusText),console.log(r),console.log(a)}(e,r,a)}function h(){s.complete?s.complete():o.removeAttr("disabled")}function v(t,e,a,s){var n=t.val(),i=t.attr("data-title");if(""==n)return c(r="<strong>"+i+"</strong> required.",t),!1;var o=t[0],l=o.files[0];n.split("\\");if(!/^([a-zA-Z0-9\s_\\.\-:])+(.jpeg|.jpg)$/.test(n.toLowerCase()))return c(r="<strong>"+i+"</strong> invalid. Please select a .jpg file.",t),!1;for(var d=l.size,u=new Array("Bytes","KB","MB","GB"),f=0;d>900;)d/=1024,f++;var g=Math.round(100*d)/100,m=u[f];if("KB"!=m)return c(r="<strong>"+i+"</strong> size is too large. Maximum size is 100 kilobytes.",t),!1;if(g>e)return c(r="<strong>"+i+"</strong> size is too large. Maximum size is 100 kilobytes.",t),!1;if("undefined"!=typeof FileReader){var h=new FileReader;h.readAsDataURL(o.files[0]),h.onload=function(e){var n=new Image;n.src=e.target.result,n.onload=function(){return this.width!=s?(c(r="<strong>"+i+"</strong> width invalid. Width must be "+s+" pixel.",t),!1):this.height!=a?(c(r="<strong>"+i+"</strong> height invalid. Height must be "+a+" pixel.",t),!1):void 0}}}return!0}a.on("submit",(function(e){e.preventDefault(),e.stopPropagation();var o,l=!1;(a.find(".validate").each((function(e,a){var s=t(this),n=s.attr("data-title");void 0===n&&(n=s.parent(".field").find("label").html());var i=s.attr("data-datatype"),o=s.val();if(!s.parent(".field").hasClass("hidden")){var d=s.closest(".toggleVisibleWrapper");if(void 0===d||!d.hasClass("hidden")){if(""!=t.trim(String(o))){let e=function(t){for(var e=0,r=t.length;e<r;e++)if(t.charCodeAt(e)>255)return!0;return!1}(t.trim(String(o)));if(e)return l=!0,console.log(s.attr("name")),c(r="<strong>"+n+"</strong> must be in english",s),!1}var u=s.attr("data-required");if(!1!==u&&void 0!==u){if(s.is(":checkbox"))if(!s.is(":checked"))return l=!0,r="<strong>"+n+"</strong> required.",console.log(s.attr("name")),c(r,s),!1;if("required"==u&&""==o)return l=!0,console.log(s.attr("name")),c(r="<strong>"+n+"</strong> required.",s),!1}var f="characters";if(!1!==(i=s.attr("data-datatype"))&&void 0!==i){var g=t.trim(o).length;if("required"==u||"optional"==u&&g>0)switch(i){case"letters":if(!/^[a-z\s]+$/i.test(o))return l=!0,message=n+" invalid.",c(message,s),!1;break;case"email":if(!/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(o))return l=!0,c(r=n+" invalid.",s),!1;break;case"mobile":if(f="digits",!function(t){if(""==(t=t.trim()))return!1;if(isNaN(t))return!1;if(t.length<10)return!1;var e=["013","014","015","016","017","018","019"];if(t.startsWith("1")){if(10!=t.length)return!1;var r="0"+t.substr(0,2);return!!e.includes(r)}if(t.startsWith("01")){if(11!=t.length)return!1;r=t.substr(0,3);return!!e.includes(r)}if(t.startsWith("8801")){if(13!=t.length)return!1;r=t.substr(2,3);return!!e.includes(r)}return!1}(o))return l=!0,c(r="<strong>"+n+"</strong> invalid.",s),!1;break;case"integer":case"float":case"double":case"decimal":if(f="digits",isNaN(o))return l=!0,c(r="<strong>"+n+"</strong> must be a valid number.",s),!1;break;case"date":if(!moment(o,"DD-MM-YYYY").isValid())return l=!0,c(r="<strong>"+n+"</strong> invalid.",s),!1}}var m=s.attr("data-minlen");if(!1!==m&&void 0!==m){g=t.trim(o).length;if(m=parseInt(m),("required"==u||"optional"==u&&g>0)&&g<m)return l=!0,console.log(s.attr("name")),c(r="<strong>"+n+"</strong> must be equal or greater than "+m+" "+f+".",s),!1}var h=s.attr("data-maxlen");if(!1!==h&&void 0!==h){g=t.trim(o).length;if(h=parseInt(h),("required"==u||"optional"==u&&g>0)&&g>h)return l=!0,console.log(s.attr("name")),c(r="<strong>"+n+"</strong> must be equal or less than "+h+" "+f+".",s),!1}var p=s.attr("data-exactlen");if(!1!==p&&void 0!==p){g=t.trim(o).length;if(p=parseInt(p),("required"==u||"optional"==u&&g>0)&&g!==p)return l=!0,console.log(s.attr("name")),c(r="<strong>"+n+"</strong> must have "+p+" "+f+".",s),!1}var b=s.attr("data-minval");if(!1!==b&&void 0!==b){if(!1!==i&&void 0===i)return l=!0,c(r="Datatype undefined for <strong>"+n+"</strong>.",s),!1;g=t.trim(o).length;if("required"==u||"optional"==u&&g>0){if(("integer"==i||"float"==i||"double"==i||"decimal"==i)&&isNaN(o))return l=!0,c(r="<strong>"+n+"</strong> must be a valid number.",s),!1;switch(i){case"integer":o=parseInt(o),b=parseInt(b);break;case"float":case"double":case"decimal":o=parseFloat(o),b=parseFloat(b);break;case"date":if(!(o=moment(o,"DD-MM-YYYY")).isValid())return l=!0,c(r="<strong>"+n+"</strong> invalid.",s),!1;b=moment(b,"DD-MM-YYYY");break;default:return l=!0,c(r="Datatype undefined for <strong>"+n+"</strong>.",s),!1}if(o<b)return l=!0,c(r="<strong>"+n+"</strong> must be equal or greater than "+b+".",s),!1}}var w=s.attr("data-maxval");if(!1!==w&&void 0!==w){if(!1!==i&&void 0===i)return l=!0,c(r="Datatype undefined for "+n+".",s),!1;g=t.trim(o).length;if("required"==u||"optional"==u&&g>0){if(("integer"==i||"float"==i||"double"==i||"decimal"==i)&&isNaN(o))return l=!0,c(r="<strong>"+n+"</strong> must be a valid number.",s),!1;switch(i){case"integer":o=parseInt(o),w=parseInt(w);break;case"float":case"double":case"decimal":o=parseFloat(o),w=parseFloat(w);break;case"date":if(!(o=moment(o,"DD-MM-YYYY")).isValid())return l=!0,c(r=n+" invalid.",s),!1;w=moment(w,"DD-MM-YYYY");break;default:return l=!0,c(r="Datatype undefined for <strong>"+n+"</strong>.",s),!1}if(o>w)return l=!0,c(r="<strong>"+n+"</strong> must be equal or less than "+w+".",s),!1}}var D=s.attr("data-exactval");if(!1!==D&&void 0!==D){if(!1!==i&&void 0===i)return l=!0,c(r="Datatype undefined for "+n+".",s),!1;g=t.trim(o).length;if("required"==u||"optional"==u&&g>0){if(("integer"==i||"float"==i||"double"==i||"decimal"==i)&&isNaN(o))return l=!0,c(r="<strong>"+n+"</strong> must be a valid number.",s),!1;switch(i){case"integer":o=parseInt(o),D=parseInt(D);break;case"float":case"double":case"decimal":o=parseFloat(o),D=parseFloat(D);break;case"date":if(!(o=moment(o,"DD-MM-YYYY")).isValid())return l=!0,c(r="<strong>"+n+"</strong> invalid.",s),!1;D=moment(D,"DD-MM-YYYY");break;default:return l=!0,c(r="Datatype undefined for <strong>"+n+"</strong>.",s),!1}if(o!=D)return l=!0,c(r="<strong>"+n+"</strong> must be equal to "+D+".",s),!1}}if(s.hasClass("photo")){var y=s.attr("data-maxkb"),Y=s.attr("data-height"),I=s.attr("data-width");if(!v(s,parseInt(y),parseInt(Y),parseInt(I)))return l=!0,!1}if(s.hasClass("signature")){y=s.attr("data-maxkb"),Y=s.attr("data-height"),I=s.attr("data-width");if(!v(s,parseInt(y),parseInt(Y),parseInt(I)))return l=!0,!1}s.removeClass("error")}}})),l)?l=!1:s.validationRules&&0==s.validationRules()||(s.ajax?"auto"==s.format&&(o=new FormData(this),t.ajax({data:o,cache:!1,contentType:!1,processData:!1,type:i,url:n,beforeSend:f,success:g,error:m,complete:h})):(f(),t(a).unbind("submit"),t(a).submit()))}))}}(jQuery);